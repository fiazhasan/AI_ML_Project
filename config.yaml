# Configuration file for Dog Breed Classification Project

# Data Configuration
data:
  dataset_name: "stanford_dogs"
  data_dir: "data/raw"
  processed_dir: "data/processed"
  num_classes: 120
  image_size: 224
  batch_size: 32
  num_workers: 4
  
  # Data splits
  train_split: 0.7
  val_split: 0.15
  test_split: 0.15
  random_seed: 42
  
  # Preprocessing
  normalization:
    mean: [0.485, 0.456, 0.406]
    std: [0.229, 0.224, 0.225]
  
  # Augmentation (training)
  augmentation:
    horizontal_flip: 0.5
    rotation: 15
    brightness: 0.2
    contrast: 0.2
    color_jitter: 0.1
  
  # Class imbalance handling
  use_class_weights: true
  use_weighted_sampling: true

# Model Configuration
model:
  # Baseline CNN
  baseline:
    architecture: "baseline_cnn"
    num_conv_blocks: 3
    conv_channels: [32, 64, 128]
    dropout: 0.5
    num_fc_layers: 2
    fc_hidden: 512
  
  # EfficientNet
  efficientnet:
    architecture: "efficientnet_b0"
    pretrained: true
    num_classes: 120
    dropout: 0.3
    freeze_backbone_epochs: 5

# Training Configuration
training:
  device: "cuda"  # "cuda" or "cpu"
  num_epochs: 30
  early_stopping:
    patience: 5
    min_delta: 0.001
  
  # Optimizer
  optimizer: "adamw"
  learning_rate: 0.001
  weight_decay: 0.01
  
  # Learning rate scheduler
  scheduler: "cosine"
  warmup_epochs: 3
  
  # Phase 2 (fine-tuning) for EfficientNet
  phase2:
    learning_rate: 0.00001
    backbone_lr: 0.00001
    classifier_lr: 0.0001
  
  # Loss
  loss: "cross_entropy"
  label_smoothing: 0.1
  
  # Mixed precision
  use_amp: true
  
  # Gradient accumulation
  gradient_accumulation_steps: 1
  
  # Logging
  log_interval: 50
  save_interval: 1
  eval_interval: 1

# Evaluation Configuration
evaluation:
  metrics: ["accuracy", "top5_accuracy", "f1_score", "confusion_matrix"]
  save_predictions: true
  visualize_errors: true
  num_error_samples: 20

# Inference Configuration
# Colab se train karke download kiye gaye best model ko yahan rakhein (see README)
inference:
  model_path: "models/efficientnet/best_model.pth"
  batch_size: 1
  top_k: 5
  confidence_threshold: 0.5

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  workers: 1
  max_file_size: 10485760  # 10MB
  allowed_extensions: [".jpg", ".jpeg", ".png"]

# Logging Configuration
logging:
  level: "INFO"
  log_dir: "logs"
  log_file: "training.log"
  tensorboard_dir: "logs/tensorboard"

# Paths
paths:
  models_dir: "models"
  logs_dir: "logs"
  checkpoints_dir: "models/checkpoints"
